:PROPERTIES:
:ID:       9cb7bab3-5342-4c3b-bd61-a5fd4a06dee8
:END:
: sysctl -w net.ipv4.conf.all.route_localnet=1

#+begin_example
  # Generated by iptables-save v1.6.0 on Fri Jun 26 14:52:04 2020
  ,*filter
  :INPUT ACCEPT [1293576:626675826]
  :FORWARD DROP [0:0]
  :OUTPUT ACCEPT [1176614:715727503]
  :DOCKER - [0:0]
  :DOCKER-ISOLATION-STAGE-1 - [0:0]
  :DOCKER-ISOLATION-STAGE-2 - [0:0]
  :DOCKER-USER - [0:0]
  COMMIT
  # Completed on Fri Jun 26 14:52:04 2020
  # Generated by iptables-save v1.6.0 on Fri Jun 26 14:52:04 2020
  ,*nat
  :PREROUTING ACCEPT [8351:486090]
  :INPUT ACCEPT [8150:470162]
  :OUTPUT ACCEPT [3259:194379]
  :POSTROUTING ACCEPT [0:0]
  :DOCKER - [0:0]
  -A PREROUTING -i eth1.80@eth1 -p tcp -m tcp -d 78.108.80.44/32 --dport 80 -j DNAT --to-destination 127.0.0.1:8080
  -A PREROUTING -i eth1.80@eth1 -p tcp -m tcp -d 78.108.80.44/32 --dport 443 -j DNAT --to-destination 127.0.0.1:8443
  -A POSTROUTING -j MASQUERADE
  COMMIT
  # Completed on Fri Jun 26 14:52:04 2020
#+end_example

- [[https://github.com/MaxKellermann/ferm][MaxKellermann/ferm: ferm is a frontend for iptables]]
- [[https://github.com/mrash/psad][mrash/psad: psad: Intrusion Detection and Log Analysis with iptables]]
- [[https://linuxconfig.org/collection-of-basic-linux-firewall-iptables-rules][Collection of basic Linux Firewall iptables rules - LinuxConfig.org]]
- [[https://logi.cc/en/2010/07/netfilter-log-format/][Netfilter Log Format]]
- [[https://github.com/Nudin/iptable_vis][Nudin/iptable_vis: visualise your iptables chains]]
- [[https://github.com/jpylypiw/easywall][jpylypiw/easywall: Web interface for easy use of the IPTables firewall on Linux systems written in Python3.]]
- [[https://github.com/bmaeser/iptables-boilerplate][bmaeser/iptables-boilerplate: rock solid default firewall-rules for webhosts]]
- [[https://webguy.vip/example-of-iptables/][Example of IPTABLES — Web Guy]]
- [[https://habr.com/ru/company/selectel/blog/511392/][xtables-addons: фильтруем пакеты по странам / Хабр]]

- iptables -t nat -A POSTROUTING -o br0 -j MASQUERADE
- iptables -A FORWARD -i br0 -o br154.154 -m state --state RELATED,ESTABLISHED -j ACCEPT
- iptables -A FORWARD -i br154.154 -o br0 -j ACCEPT

- viddy /bin/sh -c "'sudo iptables -L -v; sudo iptables -L -v -t nat'"

- iptables -A INPUT -p udp -m udp --dport 53 -m string --string "abacre" --algo kmp --to 1500 -j DROP

:PROPERTIES:
:ID:       47741106-6ce2-43bd-b536-5dcbb27db309
:END:
- [[https://vidikon.info/kvm/openvswitch-ispolzovanie-virtualnogo-kommutatora-v-linux][OpenVSwitch — использование виртуального коммутатора в Linux | vidikon.info]]
- [[https://ovs-reviews.readthedocs.io/en/latest/tutorials/ovs-advanced.html][Open vSwitch Advanced Features — Open vSwitch 2.6.0 documentation]]
- [[https://netberg.ru/wp-content/uploads/Files/OPS_of_dpa.pdf][OpenSwitch OF-DPA User Guide - OPS_of_dpa.pdf]]
- [[https://docs.openvswitch.org/en/latest/faq/configuration/][Basic Configuration — Open vSwitch 2.16.90 documentation]]

#+begin_example
  root@guixsd ~# pgrep -fa ovs
  22865 /gnu/store/1939ymmvhgs1j4vxj5higbrah46hmrpc-openvswitch-2.13.3/sbin/ovsdb-server --pidfile --remote=punix:/var/run/openvswitch/db.sock
  22876 /gnu/store/1939ymmvhgs1j4vxj5higbrah46hmrpc-openvswitch-2.13.3/sbin/ovs-vswitchd --pidfile
#+end_example

- [[https://man7.org/linux/man-pages/man7/ovs-fields.7.html][ovs-fields(7) - Linux manual page]]
- [[https://man7.org/linux/man-pages/man7/ovs-actions.7.html][ovs-actions(7) - Linux manual page]]

ovs-ofctl show ovsbr0
ovs-ofctl dump-flows ovsbr0

#+begin_example
  for BR in $(ip a | grep ovsbr | awk -F': ' '{print $2}')
  do
      ovs-ofctl add-flow ${BR} priority=47000,udp,in_port=$(ovs-vsctl list-ports ${BR}| grep eth),tp_dst=11211,actions=drop
  done
#+end_example

#+begin_example
  ovs-ofctl add-flow ovsbr0 tcp,in_port=vm12345,tp_dst=25,priority=47000,actions=drop
  ovs-ofctl add-flow ovsbr0 tcp,in_port=vm12345,tp_dst=465,priority=47000,actions=drop
  ovs-ofctl add-flow ovsbr0 tcp,in_port=vm12345,tp_dst=587,priority=47000,actions=drop
  ovs-ofctl add-flow ovsbr0 tcp,in_port=vm12345,tp_dst=2525,priority=47000,actions=drop
#+end_example

#+begin_example
  ovs-ofctl --strict del-flows ovsbr0 in_port=vm38752,tcp_dst=25
  ovs-ofctl --strict del-flows ovsbr0 in_port=vm38752,tcp_dst=465
  ovs-ofctl --strict del-flows ovsbr0 in_port=vm38752,tcp_dst=587
  ovs-ofctl --strict del-flows ovsbr0 in_port=vm38752,tcp_dst=2525
  ovs-ofctl --strict del-flows ovsbr0 in_port=vm38755,tcp_dst=25
  ovs-ofctl --strict del-flows ovsbr0 in_port=vm38755,tcp_dst=465
  ovs-ofctl --strict del-flows ovsbr0 in_port=vm38755,tcp_dst=587
  ovs-ofctl --strict del-flows ovsbr0 in_port=vm38755,tcp_dst=2525
#+end_example

#+begin_src sh
  for vm in vm12345 vm67891
  do
      for port in 25 465 587 2525
      do
          echo ovs-ofctl add-flow ovsbr0 tcp,in_port="$vm",tp_dst="$port",priority=47000,actions=drop
      done
  done
#+end_src

- ovs-vsctl -- destroy qos vm14287 -- clear port vm14287 qos

- ovs-vsctl --may-exist add-br br0
- ovs-vsctl --may-exist add-port br0 enp34s0 vlan_mode=native-untagged

- add interface to bridge
  : ovs-vsctl --may-exist add-port br154 ubuntu tag=154 vlan_mode=native-untagged

- change interface speed
  : ovs-vsctl set interface vm41032 ingress_policing_rate=100000
  : ovs-vsctl set interface vm41032 ingress_policing_burst=10000

- clean up qos and make max networking interface speed
  : ovs-vsctl clear Port vm33043 qos
  : ovs-vsctl set interface vm33043 ingress_policing_rate=1000000
  : ovs-vsctl set interface vm33043 ingress_policing_burst=100000

* OpenFlow Controlles
** Framework
- [[https://en.wikipedia.org/wiki/ONOS][ONOS - Wikipedia]]
  - [[https://www.youtube.com/user/OpenNetworkingFndn][(3) Open Networking Foundation - YouTube]]
  - [[https://opennetworking.org/onos/][Open Network Operating System (ONOS) SDN Controller for SDN/NFV Solutions]]
  - [[https://ryu.readthedocs.io/en/latest/ofproto_ref.html][OpenFlow protocol API Reference — Ryu 4.34 documentation]]
  - [[https://web.archive.org/web/20170709002538/http://onosproject.org/use-cases/][Use Cases - ONOS]]
  - [[https://github.com/opennetworkinglab/onos][opennetworkinglab/onos: Open Network Operating System]]
  - [[https://wiki.onosproject.org/display/ONOS/Installation+Guide][Installation Guide - ONOS - Wiki]]
  - [[https://wiki.onosproject.org/display/ONOS/Basic+ONOS+Tutorial][Basic ONOS Tutorial - ONOS - Wiki]]
- OVN
  - OVN openflow controller (via ovsdb)
  - [[https://man7.org/linux/man-pages/man8/ovn-controller.8.html][ovn-controller(8) - Linux manual page]]
    - nitron
  - [[https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/networking_with_open_virtual_network/planning_your_ovn_deployment][Chapter 2. Planning your OVN deployment Red Hat OpenStack Platform 16.1 | Red Hat Customer Portal]]
- [[https://github.com/floodlight/floodlight][floodlight/floodlight: Floodlight SDN OpenFlow Controller]]

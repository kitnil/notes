- [[https://docs.crowdsec.net/docs/intro][Introduction | CrowdSec]]
- [[https://habr.com/ru/company/crowdsec/blog/592305/][Интеграция CrowdSec в Kubernetes / Хабр]]
- [[https://habr.com/ru/company/crowdsec/blog/581876/][Обеспечиваем безопасность стеков Docker Compose с помощью CrowdSec / Хабр]]
- [[https://github.com/crowdsecurity/crowdsec/issues/1306][docker-compose example]]
- [[https://serveradmin.ru/ustanovka-i-nastrojka-crowdsec/][Установка и настройка CrowdSec — Server Admin]]

Разблокировать вручную конкретный ip можно следующей командой:

# cscli decisions delete --ip 10.20.1.16

Так же можно разом удалить все баны:

# cscli decisions delete --all

Можно вручную кого-то забанить:

# cscli decisions add --ip 10.20.1.16 --reason "web bruteforce" --type ban

Помимо ip адресов можно банить сразу подсети. Синтаксис точно такой же, только вместо конкретного ip указывается подсеть со своей маской. В целом, тут функционал аналогичен Fail2ban.

* metrics

С помощью Prometheus вы можете получить информацию о следующих участках
системы и метриках:

- Buckets: как много было создано и какого типа, заполнились/были переполнены
  с момента запуска демона;

- Acquisition: сколько строк/событий было прочитано из каждого из указанных
  источников, были ли они проанализированы и/или перемещены позже в корзины;

- Parser: сколько строк/событий было доставлено к каждому парсеру и удалось ли
  ему обработать упомянутые события;

- Local API: сколько раз был использован каждый маршрут и т.д.

* Cheat sheet

: ssh web33.intr sudo docker exec crowdsec cscli decisions list --output json | jq --raw-output '.[] | .source.ip'
